require './assert.tab'
require './early-return.tab'

# should early return 10
assert-eq
	early-do
		let i (var 0)
		while (varply i < 100)
			swap i + 1
			if (varply i >= 10)
				return (deref i)
		42
	10

# should early return nil
assert-eq
	early-do
		let i (var 0)
		while (varply i < 100)
			swap i + 1
			if (varply i >= 10)
				return
		42
	nil

# should normal return 42
assert-eq
	early-do
		let i (var 0)
		while (varply i < 10)
			increment i
			if (varply i >= 20)
				return (deref i)
		42
	42

# should early return 10
let i 0
early-while (< i 100)
	increment i
	if(>= i 10)
		break i
assert-eq i 10

# should normal return 10
let i 0
early-while (< i 10)
	increment i
	if(>= i 100)
		break i
	i
assert-eq i 10
